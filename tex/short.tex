

\pdfoutput=1

\documentclass{easychair}

\usepackage[utf8]{inputenc}

\usepackage[protrusion=true,expansion=true]{microtype}
\usepackage{csquotes}
\usepackage[english]{babel}

\usepackage{bussproofs}
\usepackage{xspace}


\usepackage{cleveref}


\newcommand{\constfont}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\Tri}{\constfont{Tri}}
\newcommand{\head}{\constfont{top}}
\newcommand{\tail}{\constfont{rest}}
\newcommand{\eq}{\constfont{eq}}
\newcommand{\Type}{\constfont{Type}}
\newcommand{\Setoid}{\constfont{Setoid}}
\newcommand{\coq}{\texttt{Coq}\xspace}


\begin{document}

\title{Coinitial semantics \\ for redecoration of triangular matrices}
\titlerunning{Coinitial semantics for redecoration of triangular matrices}

\author{Benedikt Ahrens \and R\'egis Spadotti}
\authorrunning{B.\ Ahrens and R.\ Spadotti}

\institute{
Institut de Recherche en Informatique de Toulouse\\
Universit\'e Paul Sabatier, 
Toulouse}


\maketitle




 In Martin-L\"of type theory, simple inductive types---\textsf{W}-types---are characterized categorically as initial algebras of
 a polynomial functor.
 Dually, \emph{co}inductive types are characterized as terminal \emph{co}algebras of polynomial functors.
 In the case of coinductive types, the meta-theoretic notion of equality given by Martin-L\"of's identity type is too weak: instead, the idea of 
 \emph{bisimilarity as equality} for coinductive data types was coined by Aczel \cite{aczel_nonwellfounded}.

 
 The characterization of inductive types as initial algebras 
 has been extended to some \emph{heterogeneous}---also called \emph{nested}---inductive data types, e.g., the type of $\lambda$-terms,
 in various formulations \cite{fpt, DBLP:journals/iandc/HirschowitzM10}.
 The main goal of those works is to characterize not only the data type via a universal property, but rather the data type
 \emph{equipped with a well-behaved substitution operation}.
 
 

 In the present work we study a specific \emph{co}inductive \emph{heterogeneous} data type---the type family $\Tri$ of 
 infinite triangular matrices---and its \emph{redecoration} operation:
 the codata type is parametrized by a fixed type $E$ for entries not on the diagonal, 
 and indexed by another, \emph{variable}, type $A$ for entries on 
 the diagonal. The respective types of its specifying destructors $\head$ and $\tail$ are given in \Cref{fig:tri_destructors},
 together with the destructors for the coinductively defined bisimilarity relation on it.
 Equipped with the redecoration operation, the type $\Tri$ is shown by Matthes and Picard \cite{DBLP:conf/types/MatthesP11}
 to constitute what they call a \enquote{weak constructive comonad}.
 \begin{figure}[htb]
  \begin{center}

     \def\extraVskip{3pt}
     \def\proofSkipAmount{\vskip.8ex plus.8ex minus.4ex}
    \AxiomC{$t : \Tri(A)$}\doubleLine
     \UnaryInfC{$\head_A(t) : A$}
      \DisplayProof
                        \hspace{3ex}
                                       \AxiomC{$t : \Tri(A)$}\doubleLine
                                       \UnaryInfC{$\tail_A(t) : \Tri(E\times A)$}
                                       \DisplayProof%

   \end{center}
%  \vspace{1ex}
   \begin{center}
                                            \def\extraVskip{3pt}
     \def\proofSkipAmount{\vskip.8ex plus.8ex minus.4ex}
    \AxiomC{$t \sim t'$}\doubleLine
     \UnaryInfC{$\head(t) = \head(t')$}
      \DisplayProof
                        \hspace{3ex}
                                       \AxiomC{$t \sim t'$}\doubleLine
                                       \UnaryInfC{$ \tail(t) \sim \tail(t')$}
                                       \DisplayProof   
  \end{center}
  \caption{Destructors and bisimilarity for the coinductive family of setoids $\Tri$} \label{fig:tri_destructors}
\end{figure}

 
 In this work, we first identify those weak constructive comonads as an instance of the more general notion of \emph{relative comonad},
 the dual to relative monads as introduced in \cite{DBLP:conf/fossacs/AltenkirchCU10}.
 Indeed, a weak constructive comonad is precisely a comonad relative to the functor $\eq:\Type\to\Setoid$, the 
 left adjoint to the forgetful functor.
 
 Afterwards, we characterize the codata type $\Tri$, equipped with the cosubstitution operation of redecoration, as a terminal object of some category.
 For this, we dualize the approach by Hirschowitz and Maggesi \cite{DBLP:journals/iandc/HirschowitzM10},
 who characterize the heterogeneous inductive type of lambda terms---equipped with a suitable substitution operation---as an initial object in
 a category of algebras for the signature of lambda terms.
 In their work, the crucial notions are the notion of monad and, more importantly, \emph{module over a monad}.
 It turns out that more work than a simple dualization is necessary for two reasons:
 \begin{itemize}
  \item the lambda calculus can be seen as a monad on types and thus, in particular, as an endofunctor.
        The codata type $\Tri$, however, associates to any \emph{type} of potential diagonal elements a \emph{setoid}
        of triangular matrices. We thus need a notion of comonad whose underlying functor is not necessarily endo: the 
        already mentioned \emph{relative} comonads;
  \item the category-theoretic analysis of the destructor $\tail$ is more complicated than that of the heterogeneous 
           constructor of abstraction of the lambda calculus.
 \end{itemize}
 Finding a suitable categorical notion to capture the destructor $\tail$ and, more importantly, its interplay with
 the comonadic redecoration operation on $\Tri$, constitutes the main contribution of the present work.
 These rather technical details shall not be given in this abstract, but are explained in a preprint \cite{trimat_coq}.
 
 



  Once we have found such a categorical notion, we can use 
  it to give a definition of a \enquote{coalgebra} for the signature of infinite triangular matrices, 
  together with a suitable notion of \emph{morphism} of such coalgebras.
   We thus obtain a category of coalgebras for that signature.
  Any object of this category comes with a comonad relative to the aforementioned functor $\eq : \Type\to\Setoid$
  and a suitable comodule over this comonad, modeling in some sense the destructor $\tail$.
  Our main result then states that this category 
  has a terminal object built from the codata type $\Tri$ and its destructor $\tail$,
  which are seen as a relative comonad and a comodule over that relative comonad, respectively.
  This universal property of coinitiality characterizes not only the codata type of infinite triangular matrices but also
  the bisimilarity relation on it as well as the redecoration operation.
 
 All our definitions, examples, and lemmas have been implemented in the proof assistant \coq. % \parencite{coq84pl3}.
 The \coq source files and HTML documentation are available on the project web page \cite{trimat_coq}.


 
We thank the anonymous referees for their helpful comments on this abstract.


\bibliographystyle{plain}
\begin{thebibliography}{1}

\bibitem{aczel_nonwellfounded}
Peter Aczel.
\newblock {\em {Non-Well-Founded Sets}}, volume~14 of {\em CSLI Lecture Notes}.
\newblock Center for the Study of Languages and Information, 1988.

\bibitem{trimat_coq}
Benedikt Ahrens and R\'egis Spadotti.
\newblock {Coinitial semantics for redecoration of triangular matrices}.
\newblock \url{http://benediktahrens.github.io/coinductives/}.

\bibitem{DBLP:conf/fossacs/AltenkirchCU10}
Thorsten Altenkirch, James Chapman, and Tarmo Uustalu.
\newblock Monads need not be endofunctors.
\newblock In C.-H.~Luke Ong, editor, {\em FOSSACS}, volume 6014 of {\em Lecture
  Notes in Computer Science}, pages 297--311. Springer, 2010.

\bibitem{fpt}
Marcelo Fiore, Gordon Plotkin, and Daniele Turi.
\newblock Abstract syntax and variable binding.
\newblock In {\em Proceedings of the 14th Annual IEEE Symposium on Logic in
  Computer Science}, LICS '99, pages 193--202, Washington, DC, USA, 1999. IEEE
  Computer Society.

\bibitem{DBLP:journals/iandc/HirschowitzM10}
Andr{\'e} Hirschowitz and Marco Maggesi.
\newblock Modules over monads and initial semantics.
\newblock {\em Inf. Comput.}, 208(5):545--564, 2010.

\bibitem{DBLP:conf/types/MatthesP11}
Ralph Matthes and Celia Picard.
\newblock Verification of redecoration for infinite triangular matrices using
  coinduction.
\newblock In Nils~Anders Danielsson and Bengt Nordstr{\"o}m, editors, {\em
  TYPES}, volume~19 of {\em LIPIcs}, pages 55--69. Schloss Dagstuhl -
  Leibniz-Zentrum f\"ur Informatik, 2011.

\end{thebibliography}



\end{document}



















